<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ilio Xaenor - DnD Charakter</title>
    <style>
        body {
            font-family: serif;
            margin: 5px;
            padding: 0;
            background-color: white;
            color: black;
            font-size: 14px;
            line-height: 1.3;
        }
        
        h1, h2, h3 {
            margin: 5px 0;
        }
        
        h3 {
            font-size: 16px;
        }
        
        .main-container {
            display: table;
            width: 100%;
            table-layout: fixed;
        }
        
        .character-sheet {
            display: table-cell;
            width: 65%;
            vertical-align: top;
            padding-right: 5px;
        }
        
        .character-image {
            display: table-cell;
            width: 35%;
            vertical-align: top;
            padding-left: 5px;
        }
        
        .character-image img {
            width: 100%;
            border: 1px solid black;
        }
        
        .compact-header {
            margin-bottom: 5px;
        }
        
        .box {
            border: 1px solid black;
            padding: 5px;
            margin-bottom: 5px;
        }
        
        .ability-scores {
            display: table;
            width: 100%;
            table-layout: fixed;
            margin-bottom: 5px;
        }
        
        .ability {
            display: table-cell;
            text-align: center;
            font-size: 12px;
            padding: 2px;
            border: 1px solid black;
        }
        
        .ability-name {
            font-weight: bold;
        }
        
        .ability-value {
            font-size: 16px;
            font-weight: bold;
        }
        
        button {
            background-color: white;
            border: 1px solid black;
            padding: 3px;
            margin: 2px;
            font-family: serif;
            font-size: 12px;
        }
        
        input, select {
            border: 1px solid black;
            padding: 3px;
            font-family: serif;
            font-size: 12px;
            background-color: white;
        }
        
        .tab-buttons {
            margin-bottom: 5px;
        }
        
        .tab-content {
            display: none;
        }
        
        .active {
            display: block;
        }
        
        .split-layout {
            display: table;
            width: 100%;
            table-layout: fixed;
        }
        
        .actions-column {
            display: table-cell;
            width: 100%;
            vertical-align: top;
        }
        
        .results-column {
            padding-left: 5px;
        }
        
        .results-box {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
        }
        
        .skill-item {
            padding: 3px;
            border-bottom: 1px solid #ccc;
            cursor: pointer;
        }
        
        .skill-value {
            float: right;
            font-weight: bold;
        }
        
        .feature-item {
            margin-bottom: 5px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
        
        .feature-name {
            font-weight: bold;
        }
        
        .dice-result {
            font-size: 24px;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .dice-breakdown {
            margin-bottom: 5px;
        }
        
        #roll-message {
            margin: 5px 0;
            padding: 3px;
            border: 1px dashed #ccc;
        }
        
        #current-damage-container {
            margin-top: 5px;
            padding: 3px;
            border: 1px solid black;
        }
        
        .hp-controls {
            display: table;
            width: 100%;
            margin: 5px 0;
        }
        
        .hp-display {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .hp-buttons {
            text-align: center;
        }
        
        .hp-button {
            width: 40px;
            height: 30px;
            font-size: 16px;
            font-weight: bold;
            margin: 0 5px;
        }
        
        .hp-input {
            width: 40px;
            text-align: center;
            margin: 0 5px;
        }
        
        .number-pad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 5px;
            margin-bottom: 5px;
        }
        
        .num-button {
            width: 100%;
            height: 30px;
            font-size: 16px;
            font-weight: bold;
        }
        
        .dice-input {
            width: 100%;
            text-align: center;
            margin-bottom: 5px;
            font-size: 16px;
            height: 30px;
        }
        
        .current-value {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .button-section {
            display: flex;
            justify-content: space-between;
        }
        
        .button-section button {
            flex: 1;
            margin: 0 2px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="character-sheet">
            <div class="compact-header">
                <h1 style="margin:0;">Ilio Xaenor</h1>
                <small>Waldelf (Gloomstalker Ranger 4 / Rogue 1) | RK: 16 | Bewegung: 35 ft | Ãœbungsbonus: +3</small>
            </div>
            
            <div class="hp-controls box">
                <div class="hp-display">
                    Trefferpunkte: <span id="current-hp">16</span>/<span id="max-hp">21</span>
                </div>
                <div class="hp-buttons">
                    <input type="number" id="hp-change" class="hp-input" value="1" min="1">
                    <button class="hp-button" onclick="modifyHP(-1)">-</button>
                    <button class="hp-button" onclick="modifyHP(1)">+</button>
                </div>
            </div>
            
            <div class="ability-scores">
                <div class="ability">
                    <div class="ability-name">STR</div>
                    <div class="ability-value">10</div>
                    <div>+0</div>
                </div>
                <div class="ability">
                    <div class="ability-name">DEX</div>
                    <div class="ability-value">18</div>
                    <div>+4</div>
                </div>
                <div class="ability">
                    <div class="ability-name">CON</div>
                    <div class="ability-value">14</div>
                    <div>+2</div>
                </div>
                <div class="ability">
                    <div class="ability-name">INT</div>
                    <div class="ability-value">10</div>
                    <div>+0</div>
                </div>
                <div class="ability">
                    <div class="ability-name">WIS</div>
                    <div class="ability-value">14</div>
                    <div>+2</div>
                </div>
                <div class="ability">
                    <div class="ability-name">CHA</div>
                    <div class="ability-value">10</div>
                    <div>+0</div>
                </div>
            </div>
            
            <div class="tab-buttons">
                <button onclick="openTab('combat')">Kampf</button>
                <button onclick="openTab('skills')">Fertigkeiten</button>
                <button onclick="openTab('features')">Merkmale & Zauber</button>
            </div>
            
            <div id="combat" class="tab-content active">
                <div class="box">
                    <button onclick="toggleBuff('hunters-mark')">Hunter's Mark</button>
                    <button onclick="toggleBuff('sharpshooter')">Sharpshooter</button>
                </div>
                
                <div class="split-layout">
                    <div class="actions-column">
                        <div class="box">
                            <h3>Angriffswurf (d20)</h3>
                            <div class="current-value" id="current-d20-value">-</div>
                            <div class="number-pad" id="d20-numpad">
                                <button class="num-button" onclick="setDiceValue('d20', 1)">1</button>
                                <button class="num-button" onclick="setDiceValue('d20', 2)">2</button>
                                <button class="num-button" onclick="setDiceValue('d20', 3)">3</button>
                                <button class="num-button" onclick="setDiceValue('d20', 4)">4</button>
                                <button class="num-button" onclick="setDiceValue('d20', 5)">5</button>
                                <button class="num-button" onclick="setDiceValue('d20', 6)">6</button>
                                <button class="num-button" onclick="setDiceValue('d20', 7)">7</button>
                                <button class="num-button" onclick="setDiceValue('d20', 8)">8</button>
                                <button class="num-button" onclick="setDiceValue('d20', 9)">9</button>
                                <button class="num-button" onclick="setDiceValue('d20', 10)">10</button>
                                <button class="num-button" onclick="setDiceValue('d20', 11)">11</button>
                                <button class="num-button" onclick="setDiceValue('d20', 12)">12</button>
                                <button class="num-button" onclick="setDiceValue('d20', 13)">13</button>
                                <button class="num-button" onclick="setDiceValue('d20', 14)">14</button>
                                <button class="num-button" onclick="setDiceValue('d20', 15)">15</button>
                                <button class="num-button" onclick="setDiceValue('d20', 16)">16</button>
                                <button class="num-button" onclick="setDiceValue('d20', 17)">17</button>
                                <button class="num-button" onclick="setDiceValue('d20', 18)">18</button>
                                <button class="num-button" onclick="setDiceValue('d20', 19)">19</button>
                                <button class="num-button" onclick="setDiceValue('d20', 20)">20</button>
                                <button class="num-button" onclick="clearDiceValue('d20')">C</button>
                            </div>
                            <div class="button-section">
                                <select id="attack-weapon-select">
                                    <option value="bow">Bogen</option>
                                    <option value="dagger">Dolch</option>
                                </select>
                                <button onclick="calculateAttack()">OK</button>
                            </div>
                        </div>
                        
                        <div class="box">
                            <h3>Schadenswurf</h3>
                            <div class="current-value" id="current-damage-die-value">-</div>
                            <div class="number-pad" id="damage-numpad">
                                <button class="num-button" onclick="setDiceValue('damage', 1)">1</button>
                                <button class="num-button" onclick="setDiceValue('damage', 2)">2</button>
                                <button class="num-button" onclick="setDiceValue('damage', 3)">3</button>
                                <button class="num-button" onclick="setDiceValue('damage', 4)">4</button>
                                <button class="num-button" onclick="setDiceValue('damage', 5)">5</button>
                                <button class="num-button" onclick="setDiceValue('damage', 6)">6</button>
                                <button class="num-button" onclick="setDiceValue('damage', 7)">7</button>
                                <button class="num-button" onclick="setDiceValue('damage', 8)">8</button>
                                <button class="num-button" onclick="clearDiceValue('damage')">C</button>
                            </div>
                            <div class="button-section">
                                <select id="damage-weapon-select">
                                    <option value="bow">Bogen (d8)</option>
                                    <option value="dagger">Dolch (d4)</option>
                                </select>
                                <button onclick="calculateDamage()">OK</button>
                            </div>
                        </div>
                        
                        <div class="box">
                            <h3>Zusatzschaden</h3>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <div style="width: 48%;">
                                    <div class="current-value" id="current-hm-value">-</div>
                                    <div class="number-pad" id="hm-numpad" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-gap: 2px;">
                                        <button class="num-button" onclick="setDiceValue('hm', 1)">1</button>
                                        <button class="num-button" onclick="setDiceValue('hm', 2)">2</button>
                                        <button class="num-button" onclick="setDiceValue('hm', 3)">3</button>
                                        <button class="num-button" onclick="setDiceValue('hm', 4)">4</button>
                                        <button class="num-button" onclick="setDiceValue('hm', 5)">5</button>
                                        <button class="num-button" onclick="setDiceValue('hm', 6)">6</button>
                                    </div>
                                    <button style="width: 100%;" onclick="addHuntersMark()">+ Hunter's Mark</button>
                                </div>
                                <div style="width: 48%;">
                                    <div class="current-value" id="current-sa-value">-</div>
                                    <div class="number-pad" id="sa-numpad" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-gap: 2px;">
                                        <button class="num-button" onclick="setDiceValue('sa', 1)">1</button>
                                        <button class="num-button" onclick="setDiceValue('sa', 2)">2</button>
                                        <button class="num-button" onclick="setDiceValue('sa', 3)">3</button>
                                        <button class="num-button" onclick="setDiceValue('sa', 4)">4</button>
                                        <button class="num-button" onclick="setDiceValue('sa', 5)">5</button>
                                        <button class="num-button" onclick="setDiceValue('sa', 6)">6</button>
                                    </div>
                                    <button style="width: 100%;" onclick="addSneakAttack()">+ Sneak Attack</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="box">
                            <button onclick="rollInitiative()">Initiative</button>
                            <button onclick="openTab('skills')">Fertigkeiten</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="skills" class="tab-content">
                <h3>Fertigkeiten</h3>
                <div class="box">
                    <div class="skill-item" onclick="rollSkill('acrobatics', 10)">
                        <span>Akrobatik (DEX)</span>
                        <span class="skill-value">+10</span>
                    </div>
                    <div class="skill-item" onclick="rollSkill('athletics', 3)">
                        <span>Athletik (STR)</span>
                        <span class="skill-value">+3</span>
                    </div>
                    <div class="skill-item" onclick="rollSkill('stealth', 10)">
                        <span>Heimlichkeit (DEX)</span>
                        <span class="skill-value">+10</span>
                    </div>
                    <div class="skill-item" onclick="rollSkill('survival', 5)">
                        <span>Ãœberlebenskunst (WIS)</span>
                        <span class="skill-value">+5</span>
                    </div>
                    <div class="skill-item" onclick="rollSkill('perception', 8)">
                        <span>Wahrnehmung (WIS)</span>
                        <span class="skill-value">+8</span>
                    </div>
                    <div class="skill-item" onclick="rollSkill('thieves-tools', 7)">
                        <span>Diebeswerkzeug (DEX)</span>
                        <span class="skill-value">+7</span>
                    </div>
                </div>
                
                <h3>RettungswÃ¼rfe</h3>
                <div class="box">
                    <div class="skill-item" onclick="rollSave('str')">
                        <span>StÃ¤rke</span>
                        <span class="skill-value">+3</span>
                    </div>
                    <div class="skill-item" onclick="rollSave('dex')">
                        <span>Geschicklichkeit</span>
                        <span class="skill-value">+7</span>
                    </div>
                    <div class="skill-item" onclick="rollSave('con')">
                        <span>Konstitution</span>
                        <span class="skill-value">+2</span>
                    </div>
                    <div class="skill-item" onclick="rollSave('int')">
                        <span>Intelligenz</span>
                        <span class="skill-value">+0</span>
                    </div>
                    <div class="skill-item" onclick="rollSave('wis')">
                        <span>Weisheit</span>
                        <span class="skill-value">+2</span>
                    </div>
                    <div class="skill-item" onclick="rollSave('cha')">
                        <span>Charisma</span>
                        <span class="skill-value">+0</span>
                    </div>
                </div>
            </div>
            
            <div id="features" class="tab-content">
                <h3>Merkmale</h3>
                <div class="box">
                    <div class="feature-item">
                        <div class="feature-name">Darkvision (120 ft)</div>
                        <p>Du kannst in Dunkelheit bis zu 120 FuÃŸ weit sehen, als wÃ¤re es dÃ¤mmriges Licht.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Fey Ancestry</div>
                        <p>Du hast Vorteil bei RettungswÃ¼rfen gegen Bezauberung und kannst nicht durch Magie in den Schlaf versetzt werden.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Trance</div>
                        <p>Anstatt zu schlafen, meditierst du tief fÃ¼r 4 Stunden pro Tag.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Archery Fighting Style</div>
                        <p>Du erhÃ¤ltst einen Bonus von +2 auf AngriffswÃ¼rfe mit Fernkampfwaffen.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Unseen in Darkness</div>
                        <p>Du bist unsichtbar fÃ¼r Kreaturen, die nur auf Darkvision angewiesen sind, um dich zu sehen.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Sharpshooter</div>
                        <p>Keine Nachteile bei groÃŸer Reichweite, ignoriert Deckung, kein Nachteil im Nahkampf.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Expertise</div>
                        <p>Dein Ãœbungsbonus ist in Akrobatik, Heimlichkeit und Wahrnehmung verdoppelt.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Sneak Attack</div>
                        <p>Einmal pro Zug 1W6 Zusatzschaden bei Vorteil oder wenn ein VerbÃ¼ndeter neben dem Ziel steht.</p>
                    </div>
                </div>
                
                <h3>Zauber</h3>
                <div class="box">
                    <div class="feature-item">
                        <div class="feature-name">Hunter's Mark (Bonusaktion)</div>
                        <p>Konzentration, 1 Stunde. +1W6 Schaden gegen markiertes Ziel.</p>
                        <button onclick="toggleBuff('hunters-mark')">Aktivieren/Deaktivieren</button>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Fog Cloud (Aktion)</div>
                        <p>Konzentration, 1 Stunde. 20-FuÃŸ Nebel erzeugt stark verhÃ¼lltes GelÃ¤nde.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Goodberry (Aktion)</div>
                        <p>10 Beeren, je 1 TP Heilung und 1 Tag Nahrung.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Beast Bond (Aktion)</div>
                        <p>Konzentration, 10 Minuten. Telepathie mit freundlichem Tier.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Cure Wounds (Aktion)</div>
                        <p>BerÃ¼hrung. Heile 1W8 + WIS Mod.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-name">Ensnaring Strike (Bonusaktion)</div>
                        <p>Konzentration, 1 Minute. NÃ¤chster Angriff erzeugt fesselnde Ranken.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="character-image">
            <img src="https://sharonmabel.github.io/DnD/Ilio.png" alt="Ilio Xaenor">
            
            <div class="box results-box">
                <h3>WÃ¼rfelergebnis</h3>
                <div class="dice-result" id="roll-value">-</div>
                <div class="dice-breakdown" id="roll-breakdown"></div>
                <div id="roll-message"></div>
                <div id="current-damage-container" style="display: none;">
                    <div id="current-damage-value" style="font-size: 20px; font-weight: bold;">0</div>
                    <div id="current-damage-breakdown"></div>
                    <button onclick="resetDamage()">ZurÃ¼cksetzen</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dice input values
        var diceValues = {
            'd20': null,
            'damage': null,
            'hm': null,
            'sa': null
        };
        
        function setDiceValue(diceType, value) {
            diceValues[diceType] = value;
            document.getElementById('current-' + diceType + '-value').textContent = value;
            
            // Set the corresponding input field (if it exists)
            if (diceType === 'd20') {
                document.getElementById('attack-roll-input').value = value;
            } else if (diceType === 'damage') {
                document.getElementById('damage-roll-input').value = value;
            } else if (diceType === 'hm') {
                document.getElementById('hunters-mark-input').value = value;
            } else if (diceType === 'sa') {
                document.getElementById('sneak-attack-input').value = value;
            }
        }
        
        function clearDiceValue(diceType) {
            diceValues[diceType] = null;
            document.getElementById('current-' + diceType + '-value').textContent = '-';
        }
        
        // Add hidden input fields for compatibility
        document.body.innerHTML += '<input type="hidden" id="attack-roll-input"><input type="hidden" id="damage-roll-input"><input type="hidden" id="hunters-mark-input"><input type="hidden" id="sneak-attack-input">';
        
        // Tab-Wechsel
        function openTab(tabName) {
            var tabContent = document.getElementsByClassName("tab-content");
            for (var i = 0; i < tabContent.length; i++) {
                tabContent[i].style.display = "none";
            }
            
            document.getElementById(tabName).style.display = "block";
        }
        
        // Alle Tabs initial ausblenden auÃŸer combat
        document.getElementById("skills").style.display = "none";
        document.getElementById("features").style.display = "none";
        
        // WÃ¼rfelfunktionen
        function rollDice(sides) {
            return Math.floor(Math.random() * sides) + 1;
        }
        
        // Lebenspunkte verwalten
        function modifyHP(modifier) {
            var changeAmount = parseInt(document.getElementById('hp-change').value);
            if (isNaN(changeAmount) || changeAmount < 1) {
                changeAmount = 1;
                document.getElementById('hp-change').value = 1;
            }
            
            var currentHP = parseInt(document.getElementById('current-hp').textContent);
            var maxHP = parseInt(document.getElementById('max-hp').textContent);
            
            if (modifier > 0) { // Heilung
                currentHP = Math.min(currentHP + (changeAmount * 1), maxHP);
            } else { // Schaden
                currentHP = Math.max(currentHP + (changeAmount * -1), 0);
            }
            
            document.getElementById('current-hp').textContent = currentHP;
        }
        
        // Aktive Buffs
        var activeBuffs = {
            'hunters-mark': false,
            'sharpshooter': false
        };
        
        var currentDamage = {
            base: 0,
            huntersMark: 0,
            sneakAttack: 0,
            modifier: 0,
            total: 0
        };
        
        function toggleBuff(buffName) {
            activeBuffs[buffName] = !activeBuffs[buffName];
            
            var message = '';
            if (buffName === 'hunters-mark') {
                message = activeBuffs[buffName] ? 
                    "Hunter's Mark aktiv (+1d6)" : 
                    "Hunter's Mark inaktiv";
            } else if (buffName === 'sharpshooter') {
                message = activeBuffs[buffName] ? 
                    "Sharpshooter aktiv" : 
                    "Sharpshooter inaktiv";
            }
            
            document.getElementById('roll-value').textContent = message;
            document.getElementById('roll-breakdown').textContent = 'Gehe zu Schritt 2';
            document.getElementById('roll-message').textContent = '';
            
            // Wechsle zum Combat-Tab, um das Ergebnis anzuzeigen
            openTab('combat');
        }
        
        // Angriff berechnen aus Eingabe
        function calculateAttack() {
            var dieRoll = diceValues['d20'];
            if (dieRoll === null) {
                document.getElementById('roll-message').textContent = 'Bitte wÃ¤hle einen d20-Wert.';
                return;
            }
            
            var weaponType = document.getElementById('attack-weapon-select').value;
            var modifier = 7; // Basis: +4 DEX, +3 Prof
            
            var total = dieRoll + modifier;
            var breakdown = "d20: " + dieRoll + " + 7 = " + total;
            
            var message = '';
            if (dieRoll === 20) {
                message = 'Kritischer Treffer!';
            } else if (dieRoll === 1) {
                message = 'Kritischer Fehlschlag!';
            }
            
            document.getElementById('roll-value').textContent = total;
            document.getElementById('roll-breakdown').textContent = breakdown;
            document.getElementById('roll-message').textContent = message;
            
            if (dieRoll !== 1) {
                document.getElementById('roll-message').textContent += ' â†’ Weiter zu Schritt 3';
            }
            
            // Clear the dice value
            clearDiceValue('d20');
        }
        
        // Schaden berechnen aus Eingabe
        function calculateDamage() {
            var dieRoll = diceValues['damage'];
            if (dieRoll === null) {
                document.getElementById('roll-message').textContent = 'Bitte wÃ¤hle einen SchadenswÃ¼rfelwert.';
                return;
            }
            
            var weaponType = document.getElementById('damage-weapon-select').value;
            var diceMax = weaponType === 'bow' ? 8 : 4;
            
            if (dieRoll > diceMax) {
                document.getElementById('roll-message').textContent = 'Wert zu hoch fÃ¼r die Waffe (max ' + diceMax + ').';
                return;
            }
            
            resetDamage();
            
            // Grundschaden
            var modifier = 4; // DEX Mod
            var baseTotal = dieRoll + modifier;
            
            currentDamage.base = dieRoll;
            currentDamage.modifier = modifier;
            currentDamage.total = baseTotal;
            
            // Breakdown erstellen
            var breakdown = dieRoll + " (Waffe) + 4 (DEX) = " + baseTotal;
            
            document.getElementById('current-damage-container').style.display = 'block';
            document.getElementById('current-damage-value').textContent = baseTotal;
            document.getElementById('current-damage-breakdown').textContent = breakdown;
            
            document.getElementById('roll-value').textContent = baseTotal;
            document.getElementById('roll-breakdown').textContent = breakdown;
            document.getElementById('roll-message').textContent = "Ggf. zu Schritt 4 (Zusatzschaden)";
            
            // Clear the dice value
            clearDiceValue('damage');
        }
        
        // Hunter's Mark hinzufÃ¼gen
        function addHuntersMark() {
            if (!activeBuffs['hunters-mark']) {
                document.getElementById('roll-message').textContent = "Hunter's Mark nicht aktiv. Aktiviere es zuerst.";
                return;
            }
            
            var huntersMarkRoll = diceValues['hm'];
            if (huntersMarkRoll === null) {
                document.getElementById('roll-message').textContent = "Bitte wÃ¤hle einen Wert fÃ¼r Hunter's Mark.";
                return;
            }
            
            currentDamage.huntersMark = huntersMarkRoll;
            currentDamage.total += huntersMarkRoll;
            
            updateDamageDisplay();
            
            // Clear the dice value
            clearDiceValue('hm');
        }
        
        // Sneak Attack hinzufÃ¼gen
        function addSneakAttack() {
            var sneakAttackRoll = diceValues['sa'];
            if (sneakAttackRoll === null) {
                document.getElementById('roll-message').textContent = 'Bitte wÃ¤hle einen Wert fÃ¼r Sneak Attack.';
                return;
            }
            
            currentDamage.sneakAttack = sneakAttackRoll;
            currentDamage.total += sneakAttackRoll;
            
            updateDamageDisplay();
            
            // Clear the dice value
            clearDiceValue('sa');
        }
        
        // Aktualisiere die Schadensanzeige
        function updateDamageDisplay() {
            document.getElementById('current-damage-value').textContent = currentDamage.total;
            
            var breakdown = currentDamage.base + " (Waffe) + " + currentDamage.modifier + " (DEX)";
            
            if (currentDamage.huntersMark > 0) {
                breakdown += " + " + currentDamage.huntersMark + " (HM)";
            }
            
            if (currentDamage.sneakAttack > 0) {
                breakdown += " + " + currentDamage.sneakAttack + " (SA)";
            }
            
            breakdown += " = " + currentDamage.total;
            document.getElementById('current-damage-breakdown').textContent = breakdown;
            
            document.getElementById('roll-value').textContent = currentDamage.total;
            document.getElementById('roll-breakdown').textContent = breakdown;
            document.getElementById('roll-message').textContent = 'Gesamtschaden';
        }
        
        // ZurÃ¼cksetzen des aktuellen Schadens
        function resetDamage() {
            currentDamage = {
                base: 0,
                huntersMark: 0,
                sneakAttack: 0,
                modifier: 0,
                total: 0
            };
            
            document.getElementById('current-damage-value').textContent = '0';
            document.getElementById('current-damage-breakdown').textContent = '';
        }
        
        // Initiative
        function rollInitiative() {
            var dieRoll = rollDice(20);
            var modifier = 4; // DEX Mod
            var total = dieRoll + modifier;
            
            document.getElementById('roll-value').textContent = total;
            document.getElementById('roll-breakdown').textContent = "Initiative: " + dieRoll + " + 4 = " + total;
            document.getElementById('roll-message').textContent = '';
        }
        
        // FertigkeitswÃ¼rfe
        function rollSkill(skillName, bonus) {
            var dieRoll = rollDice(20);
            var total = dieRoll + bonus;
            
            var skillNameGerman = {
                'acrobatics': 'Akrobatik',
                'athletics': 'Athletik',
                'stealth': 'Heimlichkeit',
                'survival': 'Ãœberlebenskunst',
                'perception': 'Wahrnehmung',
                'thieves-tools': 'Diebeswerkzeug'
            }[skillName];
            
            document.getElementById('roll-value').textContent = total;
            document.getElementById('roll-breakdown').textContent = skillNameGerman + ": " + dieRoll + " + " + bonus + " = " + total;
            document.getElementById('roll-message').textContent = '';
            
            // Wechsle zum Combat-Tab, um das Ergebnis anzuzeigen
            openTab('combat');
        }
        
        // RettungswÃ¼rfe
        function rollSave(ability) {
            var dieRoll = rollDice(20);
            var bonus = {
                'str': 3,
                'dex': 7,
                'con': 2,
                'int': 0,
                'wis': 2,
                'cha': 0
            }[ability];
            
            var abilityNameGerman = {
                'str': 'StÃ¤rke',
                'dex': 'Geschicklichkeit',
                'con': 'Konstitution',
                'int': 'Intelligenz',
                'wis': 'Weisheit',
                'cha': 'Charisma'
            }[ability];
            
            var total = dieRoll + bonus;
            
            document.getElementById('roll-value').textContent = total;
            document.getElementById('roll-breakdown').textContent = abilityNameGerman + " RW: " + dieRoll + " + " + bonus + " = " + total;
            document.getElementById('roll-message').textContent = '';
            
            // Wechsle zum Combat-Tab, um das Ergebnis anzuzeigen
            openTab('combat');
        }
    </script>
</body>
</html>